<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Bible Reader</title>
</head>

<body>
    <header>
        <h1>Bible App (NIV)</h1>
        <h2 id="currentReference">Select a book and chapter below.</h2>
    </header>

    <div id="verseContainer">
        <p class="initial-message">Use the menu at the bottom to select a book and chapter.</p>
        <!-- The canvas will overlay this container via CSS positioning -->
        <canvas id="drawingCanvas"></canvas>
    </div>

    <!-- NEW: Drawing Tools Panel -->
    <div id="drawingTools" class="drawing-controls hidden">
        <label for="colorPicker" class="tool-label">Pen Color:</label>
        <input type="color" id="colorPicker" value="#f43f5e" class="tool-input">
        
        <label for="penSize" class="tool-label">Size:</label>
        <input type="range" id="penSize" min="1" max="15" value="5" class="tool-input size-slider">

        <button id="clearDrawing" class="tool-button secondary">Clear Drawing</button>
        <button id="toggleDrawingMode" class="tool-button primary">Done</button>
    </div>

    <!-- Fixed Bottom Menu: Now includes Drawing Mode Toggle -->
    <nav class="fixed-bottom-menu">
        <div class="menu-content">
            <!-- Abbreviated button text for better mobile fit -->
            <button id="btnOT" class="menu-button" type="button" aria-pressed="false">OT</button>
            <button id="btnNT" class="menu-button" type="button" aria-pressed="false">NT</button>
            <button id="chapterSelectorBtn" class="menu-button" type="button" disabled>Ch: -</button>
            <!-- NEW VERSE SELECTOR BUTTON -->
            <button id="verseSelectorBtn" class="menu-button" type="button" disabled>Vs: All</button>
            <button id="clearHighlights" class="menu-button secondary" type="button">Clear</button>
            
            <!-- NEW: Drawing Mode Button -->
            <button id="startDrawingMode" class="menu-button tertiary" type="button">Draw</button>
        </div>
    </nav>

    <!-- Book Selection Modal (Common for OT/NT) -->
    <div id="bookModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="bookModalTitle">
        <div class="modal-content">
            <h3 id="bookModalTitle">Select a Book</h3>
            <span class="close-btn">&times;</span>
            <div id="bookList" class="button-group book-group" role="group" aria-label="Bible Books">
                <!-- Book buttons will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Chapter Selection Modal -->
    <div id="chapterModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="chapterModalTitle">
        <div class="modal-content">
            <h3 id="chapterModalTitle">Select Chapter <span id="currentBookName"></span></h3>
            <span class="close-btn">&times;</span>
            <div id="chapterList" class="button-group chapter-group" role="group" aria-label="Chapters">
                <!-- Chapter buttons will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- NEW VERSE SELECTION MODAL -->
    <div id="verseModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="verseModalTitle">
        <div class="modal-content">
            <h3 id="verseModalTitle">Select Verse <span id="currentChapterReference"></span></h3>
            <span class="close-btn">&times;</span>
            <div id="verseList" class="button-group chapter-group" role="group" aria-label="Verses">
                <!-- Verse buttons will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>

    <script src="niv.js"></script>
    <script src="script.js"></script>
</body>

</html>
